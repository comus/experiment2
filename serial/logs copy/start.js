const data = `
14:16:36.775 INFO  [#],0,10102531,"2021-03-22T06:16:36.775Z" 
14:16:37.597 INFO  [#],0,10103322,"2021-03-22T06:16:37.596Z" 
14:16:38.270 INFO  [#],0,10104022,"2021-03-22T06:16:38.270Z" 
14:16:38.917 INFO  [#],0,10104637,"2021-03-22T06:16:38.917Z" 
14:16:39.544 INFO  [#],0,10105278,"2021-03-22T06:16:39.544Z" 
14:16:40.229 INFO  [#],0,10105943,"2021-03-22T06:16:40.229Z" 
14:16:40.971 INFO  [#],0,10106722,"2021-03-22T06:16:40.971Z" 
14:16:41.545 INFO  [#],0,10107304,"2021-03-22T06:16:41.545Z" 
14:16:42.231 INFO  [#],0,10107955,"2021-03-22T06:16:42.231Z" 
14:16:42.837 INFO  [#],0,10108595,"2021-03-22T06:16:42.837Z" 


`
let array = []
let min = 2616383694245

data.replace(/\"/g, '').replace(/ /g, '').split('\n').forEach(line => {
  if (line) {
    const lineArray = line.split(',')
    // console.log(lineArray)
    if (lineArray[2]) {
      console.log(new Date(lineArray[3]).getTime() - parseInt(lineArray[2]))
      array.push(new Date(lineArray[3]).getTime() - parseInt(lineArray[2]))
      if (new Date(lineArray[3]).getTime() - parseInt(lineArray[2]) < min) {
        min = new Date(lineArray[3]).getTime() - parseInt(lineArray[2])
      }
    }
  }
})

console.log('min', min)

const records = `
14:51:44.823 INFO  [16],1,12209531,"2021-03-22T06:51:44.823Z" 
14:51:47.808 INFO  [16],2,12212531,"2021-03-22T06:51:47.808Z" 
14:51:50.865 INFO  [16],3,12215531,"2021-03-22T06:51:50.865Z" 
14:51:59.850 INFO  [16],6,12224531,"2021-03-22T06:51:59.850Z" 
14:52:02.799 INFO  [16],7,12227531,"2021-03-22T06:52:02.799Z" 
14:52:05.863 INFO  [16],8,12230531,"2021-03-22T06:52:05.863Z" 
14:52:08.807 INFO  [16],9,12233531,"2021-03-22T06:52:08.807Z" 
14:52:14.806 INFO  [16],11,12239531,"2021-03-22T06:52:14.806Z" 
14:52:17.806 INFO  [16],12,12242531,"2021-03-22T06:52:17.806Z" 
14:52:20.817 INFO  [16],13,12245531,"2021-03-22T06:52:20.817Z" 
14:52:26.805 INFO  [16],15,12251531,"2021-03-22T06:52:26.805Z" 
14:52:29.785 INFO  [16],16,12254531,"2021-03-22T06:52:29.784Z" 
14:52:32.781 INFO  [16],17,12257531,"2021-03-22T06:52:32.781Z" 
14:52:35.850 INFO  [16],18,12260533,"2021-03-22T06:52:35.850Z" 
14:52:41.802 INFO  [16],20,12266531,"2021-03-22T06:52:41.802Z" 
14:52:44.804 INFO  [16],21,12269531,"2021-03-22T06:52:44.804Z" 
14:52:50.811 INFO  [16],23,12275531,"2021-03-22T06:52:50.811Z" 
14:52:53.821 INFO  [16],24,12278531,"2021-03-22T06:52:53.821Z" 
14:52:56.810 INFO  [16],25,12281531,"2021-03-22T06:52:56.810Z" 
14:52:59.821 INFO  [16],26,12284531,"2021-03-22T06:52:59.821Z" 
14:53:05.798 INFO  [16],28,12290531,"2021-03-22T06:53:05.798Z" 
14:53:08.822 INFO  [16],29,12293531,"2021-03-22T06:53:08.822Z" 
14:53:11.812 INFO  [16],30,12296531,"2021-03-22T06:53:11.812Z" 
14:53:17.817 INFO  [16],32,12302531,"2021-03-22T06:53:17.817Z" 
14:53:23.777 INFO  [16],34,12308531,"2021-03-22T06:53:23.777Z" 
14:53:29.794 INFO  [16],36,12314532,"2021-03-22T06:53:29.794Z" 
14:53:32.850 INFO  [16],37,12317531,"2021-03-22T06:53:32.850Z" 
14:53:35.808 INFO  [16],38,12320531,"2021-03-22T06:53:35.808Z" 
14:53:38.791 INFO  [16],39,12323531,"2021-03-22T06:53:38.791Z" 
14:53:47.832 INFO  [16],42,12332531,"2021-03-22T06:53:47.832Z" 
14:53:53.784 INFO  [16],44,12338531,"2021-03-22T06:53:53.784Z" 
14:53:56.805 INFO  [16],45,12341531,"2021-03-22T06:53:56.805Z" 
14:53:59.789 INFO  [16],46,12344531,"2021-03-22T06:53:59.789Z" 
14:54:02.817 INFO  [16],47,12347531,"2021-03-22T06:54:02.817Z" 
14:54:05.792 INFO  [16],48,12350531,"2021-03-22T06:54:05.792Z" 
14:54:11.801 INFO  [16],50,12356532,"2021-03-22T06:54:11.801Z" 
14:54:14.805 INFO  [16],51,12359531,"2021-03-22T06:54:14.805Z" 
14:54:17.806 INFO  [16],52,12362531,"2021-03-22T06:54:17.806Z" 
14:54:20.807 INFO  [16],53,12365531,"2021-03-22T06:54:20.807Z" 
14:54:23.790 INFO  [16],54,12368531,"2021-03-22T06:54:23.790Z" 
14:54:26.808 INFO  [16],55,12371531,"2021-03-22T06:54:26.808Z" 
14:54:38.805 INFO  [16],59,12383531,"2021-03-22T06:54:38.805Z" 
14:54:44.777 INFO  [16],61,12389531,"2021-03-22T06:54:44.777Z" 
14:54:47.802 INFO  [16],62,12392531,"2021-03-22T06:54:47.802Z" 
14:54:53.848 INFO  [16],64,12398531,"2021-03-22T06:54:53.848Z" 
14:55:17.782 INFO  [16],72,12422531,"2021-03-22T06:55:17.782Z" 
14:55:26.813 INFO  [16],75,12431531,"2021-03-22T06:55:26.813Z" 
14:55:32.803 INFO  [16],77,12437531,"2021-03-22T06:55:32.803Z" 
14:55:38.807 INFO  [16],79,12443531,"2021-03-22T06:55:38.807Z" 
14:55:44.776 INFO  [16],81,12449531,"2021-03-22T06:55:44.776Z" 
14:55:50.810 INFO  [16],83,12455531,"2021-03-22T06:55:50.810Z" 
14:55:53.790 INFO  [16],84,12458531,"2021-03-22T06:55:53.790Z" 
14:56:02.836 INFO  [16],87,12467531,"2021-03-22T06:56:02.836Z" 
14:56:05.849 INFO  [16],88,12470531,"2021-03-22T06:56:05.849Z" 
14:56:14.820 INFO  [16],91,12479531,"2021-03-22T06:56:14.820Z" 
14:56:17.837 INFO  [16],92,12482531,"2021-03-22T06:56:17.837Z" 
14:56:20.841 INFO  [16],93,12485531,"2021-03-22T06:56:20.841Z" 
14:56:23.806 INFO  [16],94,12488531,"2021-03-22T06:56:23.806Z" 
14:56:29.861 INFO  [16],96,12494531,"2021-03-22T06:56:29.861Z" 
14:56:35.825 INFO  [16],98,12500531,"2021-03-22T06:56:35.825Z" 
14:56:42.942 INFO  [16],99,12503531,"2021-03-22T06:56:42.942Z" 

`


const rootTime = min - 2

const endTime = []
let startTime = []

records.replace(/\"/g, '').replace(/ /g, '').split('\n').forEach(line => {
  if (line) {
    const lineArray = line.split(',')
    // console.log(lineArray)
    if (lineArray[2]) {
      endTime.push(lineArray[3])
      startTime.push(parseInt(lineArray[2]))
    }
  }
})

startTime = startTime.map(time => rootTime + time)

console.log(endTime)

console.log(startTime)

let transmitTime = []
for(let i = 0; i < endTime.length; i++) {
  transmitTime[i] = new Date(endTime[i]).getTime() - startTime[i]
}

console.log("傳輸時間", transmitTime)

let avgTransmitTime = 0
for(i = 0; i < transmitTime.length; i++) {
  avgTransmitTime += transmitTime[i]
}
avgTransmitTime = avgTransmitTime / transmitTime.length

console.log("avgTransmitTime milliseconds", avgTransmitTime)